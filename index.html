<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mulch Calculator</title>
</head>
<body>
  <div id="almanac-container">
    <div id="calculator-header">
      <h1>Mulch Calculator</h1>
      <p>Estimate how much mulch you need for your garden beds.</p>
    </div>
    <div id="calculator-form"></div>
    <div id="error-message" style="color: #ad2a24; margin-top: 10px; display: none;"></div>
    <div id="calculator-results" style="display:none;"></div>

  </div>
<script>
  
    function applyAlmanacStyles() {
      document.body.style.fontFamily = "'Helvetica Neue', Arial, sans-serif";
      document.body.style.backgroundColor = "#fff";
      document.body.style.color = "#333";
      document.body.style.margin = "0";
      document.body.style.padding = "0";
      document.body.style.lineHeight = "1.6";

      const container = document.getElementById("almanac-container");
      container.style.maxWidth = "450px";  // Reduced from 800px
      container.style.margin = "20px auto";
      container.style.padding = "20px";
      container.style.backgroundColor = "#f9f6ee";
      container.style.borderRadius = "10px";
      container.style.boxShadow = "0 2px 5px rgba(0,0,0,0.1)";

      const header = document.getElementById("calculator-header");
      header.style.marginBottom = "20px";
      header.querySelector("h1").style.color = "#553a4d";
      header.querySelector("h1").style.fontSize = "28px";
      header.querySelector("p").style.color = "#666";

      const formStyles = document.createElement("style");
      formStyles.textContent = `
        #calculator-form label {
          background: #f9f6ee;
          display: block;
          margin: 15px 0 5px;
          color: #af6b35;
          font-weight: bold;
        }
        .input-group {
          display: flex;
          gap: 10px;
          max-width: 400px;
          margin-bottom: 10px;
        }
        .input-group input, 
        .input-group select {
          flex: 1;
        }
        #calculator-form input, 
        #calculator-form select {
          width: 100%;
          padding: 10px;
          border: 1px solid #ddd;
          border-radius: 7px;
          font-size: 16px;
          margin-bottom: 10px;
          max-width: 400px;
          box-sizing: border-box;
          transition: all 0.3s ease;
        }
        #calculator-form input:focus,
        #calculator-form select:focus {
          outline: 2px solid #ad2a24;
          transform: scale(1.02);
        }
        .button-group {
          display: flex;
          gap: 10px;
          margin-top: 15px;
          max-width: 400px;
        }
        #calculator-form button {
          flex: 1;
          padding: 12px;
          border-radius: 4px;
          cursor: pointer;
          font-size: 16px;
          transition: all 0.2s ease;
          transform: translateY(0);
        }
        #calculate-btn {
          background-color: #ad2a24;
          font-size:1.2rem;
          font-weight:bold;
          color: white;
          border: none;
        }
        #calculate-btn:hover {
          background-color: #8a221e;
          transform: translateY(-2px);
          box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        #calculate-btn:active {
          transform: translateY(0);
          box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        #reset-btn {
          background-color:#dfcda7;
          color: #885b23;
          border: 1px solid #ddd;
          font-size:1.2rem;
          font-weight:bold;
        }
        #reset-btn:hover {
          background-color:#e8e0c5;
          transform: translateY(-2px);
          box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        #reset-btn:active {
          transform: translateY(0);
          box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        #calculator-results {
          background-color: #fff;
          padding: 20px;
          margin-top: 25px;
          border-radius: 4px;
          max-width: 400px;
        }
        .result-item {
          margin-bottom: 10px;
        }
        @media (max-width: 600px) {
          #almanac-container {
            padding: 15px;
            max-width: 95%;
          }
          .button-group {
            flex-direction: column;
            width: 100%;
          }
          #calculator-form input, 
          #calculator-form select {
            width: 100%;
          }
          #calculator-results {
            width: 100%;
          }
        }
      `;
      document.head.appendChild(formStyles);
    }

    // ===== CALCULATOR LOGIC =====
    function createCalculator() {
      const form = document.createElement("form");
      form.id = "mulch-calculator";
      form.innerHTML = `
        <label for="length">Dimensions:</label>
        <div class="input-group">
          <input type="number" id="length" placeholder="Length">
          <span style="align-self: center; padding: 0 5px;">x</span>
          <input type="number" id="width" placeholder="Width">
        </div>
        <div class="input-group">
          <select id="dimUnit">
            <option value="ft">Feet</option>
            <option value="yd">Yards</option>
            <option value="m">Meters</option>
          </select>
        </div>

        <label for="totalArea">OR Total Area:</label>
        <div class="input-group">
          <input type="number" id="totalArea" placeholder="e.g., 100">
          <select id="areaUnit">
            <option value="sqft">Square Feet</option>
            <option value="sqyd">Square Yards</option>
            <option value="sqm">Square Meters</option>
          </select>
        </div>

        <label for="depth">Mulch Depth:</label>
        <div class="input-group">
          <input type="number" id="depth" value="3" min="0.1" step="0.1">
          <select id="depthUnit">
            <option value="in">Inches</option>
            <option value="cm">Centimeters</option>
          </select>
        </div>

        <label for="mulchType">Mulch Type:</label>
        <div class="input-group">
          <select id="mulchType">
            <option value="shredded">Shredded Bark</option>
            <option value="nuggets">Bark Nuggets</option>
            <option value="pine">Pine Straw/Pine Needles</option>
          </select>
        </div>

        <div class="button-group">
          <button type="button" id="calculate-btn">Calculate</button>
          <button type="reset" id="reset-btn">Reset</button>
        </div>
      `;
      document.getElementById("calculator-form").appendChild(form);

      // Event listeners
      document.getElementById("calculate-btn").addEventListener("click", calculateMulch);
      document.getElementById("reset-btn").addEventListener("click", () => {
        const results = document.getElementById("calculator-results");
        results.innerHTML = "";
        results.style.display = "none";  // ðŸ”¹ Hide results when reset is clicked
        document.getElementById("error-message").style.display = "none";
      });
    }

    // Unit conversions
    function convertToSqFt(value, unit) {
      const conversions = {
        sqft: 1, 
        sqyd: 9, 
        sqm: 10.764
      };
      return value * (conversions[unit] || 1);
    }

    function convertToFt(value, unit) {
      const conversions = {
        ft: 1, 
        yd: 3, 
        m: 3.281
      };
      return value * (conversions[unit] || 1);
    }

    function convertDepthToFt(value, unit) {
      const conversions = {
        in: 0.0833, 
        cm: 0.0328
      };
      return value * (conversions[unit] || 1);
    }

    // Main calculation
    function calculateMulch() {
      const errorElement = document.getElementById("error-message");
      errorElement.style.display = "none";
      
      const areaInput = document.getElementById("totalArea").value;
      const areaUnit = document.getElementById("areaUnit").value;
      const length = document.getElementById("length").value;
      const width = document.getElementById("width").value;
      const dimUnit = document.getElementById("dimUnit").value;
      const depth = document.getElementById("depth").value;
      const depthUnit = document.getElementById("depthUnit").value;
      const mulchType = document.getElementById("mulchType").value;

      // Validate input
      if ((!areaInput && (!length || !width))) {
        errorElement.textContent = "Please enter either Length Ã— Width (OR) Total Area";
        errorElement.style.display = "block";
        return;
      }
      if (!depth || depth <= 0) {
        errorElement.textContent = "Please enter a valid depth greater than 0.";
        errorElement.style.display = "block";
        return;
      }

      // Calculate area in square feet
      let areaSqFt;
      if (length && width) {
        const lengthFt = convertToFt(parseFloat(length), dimUnit);
        const widthFt = convertToFt(parseFloat(width), dimUnit);
        areaSqFt = lengthFt * widthFt;
      } else {
        areaSqFt = convertToSqFt(parseFloat(areaInput), areaUnit);
      }

      // Convert depth to feet
      const depthFt = convertDepthToFt(parseFloat(depth), depthUnit);

      // Calculate volumes
      const volumeCuFt = areaSqFt * depthFt;
      const volumeCuYd = volumeCuFt / 27;
      const volumeCuM = volumeCuFt * 0.0283168;
      const volumeLiters = volumeCuM * 1000;
      
      // Display results
      const results = document.getElementById("calculator-results");
      
      if (mulchType === "pine") {
        // Pine Straw/Pine Needles - show only volume
        results.innerHTML = `
          <h3 style="color: #ad2a24; margin-top: 0;">Mulch Needed</h3>
          <div class="result-item"><strong>${volumeCuFt.toFixed(1)} cubic feet</strong></div>
          <div class="result-item"><strong>${volumeCuYd.toFixed(2)} cubic yards</strong></div>
          <div class="result-item"><strong>${volumeCuM.toFixed(2)} cubic meters</strong></div>
          <div class="result-item"><strong>${Math.round(volumeLiters)} liters</strong></div>
        `;
      } else {
        // Shredded Bark or Bark Nuggets - show volume and bags
        const bagSize = 2; // Standard bag size for bark mulches
        const bags = Math.ceil(volumeCuFt / bagSize);
        const mulchTypeName = mulchType === "shredded" ? "Shredded Bark" : "Bark Nuggets";
        
        results.innerHTML = `
          <h3 style="color: #ad2a24; margin-top: 0;">Mulch Needed</h3>
          <div class="result-item"><strong>${volumeCuFt.toFixed(1)} cubic feet</strong></div>
          <div class="result-item"><strong>${volumeCuYd.toFixed(2)} cubic yards</strong> (bulk delivery)</div>
          <div class="result-item"><strong>${volumeCuM.toFixed(2)} cubic meters</strong></div>
          <div class="result-item"><strong>${Math.round(volumeLiters)} liters</strong></div>
          <div class="result-item"><strong>${bags} bags</strong> (standard 2 cubic ft bags)</div>
        `;
      }
      results.style.display = "block";
    }

    // Initialize
    window.onload = function() {
      applyAlmanacStyles();
      createCalculator();
    };
</script>
</body>
</html>